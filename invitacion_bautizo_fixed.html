<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Invitación Bautizo - Jose Mathias</title>
  <style>
    body {
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      font-family: 'Georgia', serif;
      background: linear-gradient(135deg, #7aa1f2 0%, #a9c5ff 50%, #cfd9ff 100%);
      background-size: 400% 400%;
      animation: backgroundShift 20s ease infinite;
      padding: 20px;
    }
    
    @keyframes backgroundShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    
    .container {
      position: relative;
      max-width: 800px;
      width: 100%;
    }
    
    canvas {
      box-shadow: 0 0 30px rgba(0, 0, 0, 0.15);
      border-radius: 10px;
      max-width: 100%;
      height: auto;
      background: white;
    }

    /* Responsive styles */
    @media screen and (max-width: 840px) {
      .container {
        width: 95%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <canvas id="baptismCanvas" width="800" height="1200"></canvas>
    <noscript>
      <div style="text-align: center; padding: 20px; color: #333;">
        <h1>Invitación Bautizo de Jose Mathias</h1>
        <p style="font-style: italic;">Con inmensa alegría, queremos compartir contigo un momento muy especial en nuestras vidas.</p>
        <p><strong>El Bautizo de nuestro hijo, Jose Mathias.</strong></p>
        <img src="iCloud Photos from Helbs LozRoj/89403b46-9e13-4d3e-b6f6-b17c5359e2e6.jpg" alt="Jose Mathias" style="max-width: 100%; height: auto; margin: 20px 0; border: 8px solid white; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
        <p>Fecha: Viernes, 6 de septiembre de 2025<br>
        Hora: 12:00 del día<br>
        Lugar: Parroquia de San Ginés<br>
        Dirección: Plaza de las Palmas, 1</p>
        <p>Padres: José y Victoria | Padrinos: Humberto y Ángela</p>
        <p style="font-style: italic;">Celebra con nosotros este momento lleno de fe, amor y esperanza, en el que una nueva luz se enciende en nuestro camino.</p>
      </div>
    </noscript>
  </div>

  <script>
    const canvas = document.getElementById('baptismCanvas');
    const ctx = canvas.getContext('2d');
    
    // Variables globales
    let img = null;
    let imageLoaded = false;
    let animationId = null;
    
    // Función para redimensionar canvas
    function resizeCanvas() {
      const container = document.querySelector('.container');
      const containerWidth = container.clientWidth;
      
      if (containerWidth < 800) {
        const aspectRatio = canvas.height / canvas.width;
        canvas.style.width = containerWidth + 'px';
        canvas.style.height = (containerWidth * aspectRatio) + 'px';
      } else {
        canvas.style.width = '';
        canvas.style.height = '';
      }
    }
    
    // Cargar imagen
    function loadImage() {
      img = new Image();
      img.onload = function() {
        imageLoaded = true;
        console.log('Imagen cargada exitosamente');
      };
      img.onerror = function() {
        console.log('Error cargando imagen, continuando sin ella');
        imageLoaded = false;
      };
      img.src = 'iCloud Photos from Helbs LozRoj/89403b46-9e13-4d3e-b6f6-b17c5359e2e6.jpg';
    }
    
    // Función para dibujar nubes danzantes
    function drawCloud(x, y, size, time, seed) {
      ctx.save();
      
      const bubbleCount = 6;
      const brightness = 250 + Math.sin(time * 0.001 + seed) * 5;
      const alpha = 0.8 + Math.sin(time * 0.002 + seed) * 0.1;
      
      for (let i = 0; i < bubbleCount; i++) {
        const angle = (i / bubbleCount) * Math.PI * 2;
        const distance = size * 0.4 * (0.6 + Math.sin(seed + i) * 0.4);
        const bubblex = x + Math.cos(angle) * distance + Math.sin(time * 0.0005 + i + seed) * 8;
        const bubbley = y + Math.sin(angle) * distance * 0.6 + Math.cos(time * 0.0004 + i + seed) * 5;
        
        const bubbleSize = (0.4 + Math.sin(seed + i * 4) * 0.3) * size;
        
        const cloudGrad = ctx.createRadialGradient(
          bubblex, bubbley, 0,
          bubblex, bubbley, bubbleSize
        );
        cloudGrad.addColorStop(0, `rgba(${brightness}, ${brightness}, ${brightness}, ${alpha})`);
        cloudGrad.addColorStop(0.7, `rgba(${brightness-5}, ${brightness-5}, ${brightness}, ${alpha*0.9})`);
        cloudGrad.addColorStop(1, `rgba(${brightness-10}, ${brightness-10}, ${brightness-5}, 0)`);
        
        ctx.fillStyle = cloudGrad;
        ctx.beginPath();
        ctx.arc(bubblex, bubbley, bubbleSize, 0, Math.PI * 2);
        ctx.fill();
      }
      
      ctx.restore();
    }
    
    // Función para dibujar fondo celestial
    function drawBackground(time = 0) {
      const centerX = canvas.width / 2;
      const centerY = canvas.height / 2;
      
      // Degradado principal celestial azul
      const skyGrad = ctx.createLinearGradient(0, 0, 0, canvas.height);
      skyGrad.addColorStop(0, `rgba(135, 206, 250, ${0.9 + Math.sin(time * 0.0005) * 0.1})`);
      skyGrad.addColorStop(0.6, `rgba(176, 196, 255, ${0.9 + Math.sin(time * 0.0003) * 0.1})`);
      skyGrad.addColorStop(1, `rgba(230, 230, 255, ${0.95 + Math.sin(time * 0.0004) * 0.05})`);
      
      ctx.fillStyle = skyGrad;
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      
      // Dibujar nubes danzantes
      for (let i = 0; i < 8; i++) {
        const cloudSeed = i * 1000;
        const cloudX = centerX + (i - 3.5) * 90 + Math.sin(time * 0.0002 + i) * 40;
        const cloudY = 80 + (i % 3) * 80 + Math.cos(time * 0.0003 + i) * 25;
        const cloudSize = 50 + (i % 3) * 20 + Math.sin(time * 0.0004 + i) * 15;
        
        drawCloud(cloudX, cloudY, cloudSize, time, cloudSeed);
      }
      
      // Efecto de luz celestial
      const celestialGlow = ctx.createRadialGradient(
        centerX, centerY * 0.3, 0,
        centerX, centerY * 0.3, canvas.height * 0.8
      );
      celestialGlow.addColorStop(0, `rgba(255, 255, 255, ${0.2 + Math.sin(time * 0.001) * 0.1})`);
      celestialGlow.addColorStop(0.3, `rgba(255, 250, 240, ${0.15 + Math.sin(time * 0.001) * 0.05})`);
      celestialGlow.addColorStop(1, 'rgba(255, 250, 240, 0)');
      
      ctx.fillStyle = celestialGlow;
      ctx.fillRect(0, 0, canvas.width, canvas.height);
    }
    
    // Función para dibujar cruces celestiales
    function drawCornerCrosses(time = 0) {
      const crossSize = 32;
      const margin = 60;
      
      function drawCross(x, y, index) {
        const pulseIntensity = 0.15;
        const pulseFrequency = 0.001;
        const pulseFactor = 1 + Math.sin(time * pulseFrequency + index) * pulseIntensity;
        
        // Resplandor celestial
        const glowSize = crossSize * 1.3 * pulseFactor;
        const glow = ctx.createRadialGradient(x, y, 0, x, y, glowSize);
        glow.addColorStop(0, `rgba(255, 255, 255, ${0.6 * pulseFactor})`);
        glow.addColorStop(0.5, `rgba(200, 220, 255, ${0.4 * pulseFactor})`);
        glow.addColorStop(1, 'rgba(180, 200, 255, 0)');
        
        ctx.fillStyle = glow;
        ctx.beginPath();
        ctx.arc(x, y, glowSize, 0, Math.PI * 2);
        ctx.fill();
        
        // Cruz principal con gradiente celestial
        const gradientCross = ctx.createLinearGradient(
          x - crossSize/2, y - crossSize/2, 
          x + crossSize/2, y + crossSize/2
        );
        gradientCross.addColorStop(0, `rgba(220, 230, 255, ${0.9 * pulseFactor})`);
        gradientCross.addColorStop(0.5, `rgba(200, 220, 250, ${0.8 * pulseFactor})`);
        gradientCross.addColorStop(1, `rgba(180, 200, 240, ${0.7 * pulseFactor})`);
        
        ctx.strokeStyle = gradientCross;
        ctx.lineWidth = 3 * pulseFactor;
        ctx.lineCap = 'round';
        
        ctx.beginPath();
        ctx.moveTo(x, y - crossSize/2);
        ctx.lineTo(x, y + crossSize/2);
        ctx.moveTo(x - crossSize/2, y);
        ctx.lineTo(x + crossSize/2, y);
        ctx.stroke();
        
        // Centro brillante
        const centerGlow = ctx.createRadialGradient(x, y, 0, x, y, 5 * pulseFactor);
        centerGlow.addColorStop(0, 'rgba(255, 255, 255, 1)');
        centerGlow.addColorStop(0.5, 'rgba(240, 250, 255, 0.8)');
        centerGlow.addColorStop(1, 'rgba(220, 240, 255, 0)');
        
        ctx.fillStyle = centerGlow;
        ctx.beginPath();
        ctx.arc(x, y, 5 * pulseFactor, 0, Math.PI * 2);
        ctx.fill();
      }
      
      ctx.save();
      drawCross(margin, margin, 0);
      drawCross(canvas.width - margin, margin, 1);
      drawCross(margin, canvas.height - margin, 2);
      drawCross(canvas.width - margin, canvas.height - margin, 3);
      ctx.restore();
    }
    
    // Función para dibujar elementos estáticos
    function drawStaticElements() {
      // Título principal con sombra
      ctx.textAlign = 'center';
      ctx.shadowColor = 'rgba(0, 0, 0, 0.3)';
      ctx.shadowBlur = 4;
      ctx.shadowOffsetX = 2;
      ctx.shadowOffsetY = 2;
      
      ctx.fillStyle = '#2c3e50';
      ctx.font = 'bold 42px Georgia, serif';
      ctx.fillText('Bautizo', canvas.width/2, 120);
      
      // Nombre del bebé
      ctx.font = 'italic bold 52px Georgia, serif';
      ctx.fillStyle = '#34495e';
      ctx.fillText('Jose Mathias', canvas.width/2, 180);
      
      // Resetear sombra
      ctx.shadowColor = 'transparent';
      ctx.shadowBlur = 0;
      ctx.shadowOffsetX = 0;
      ctx.shadowOffsetY = 0;
      
      // Imagen del bebé
      if (imageLoaded && img) {
        const targetW = 400;
        const scale = targetW / img.width;
        const imgW = targetW;
        const imgH = img.height * scale;
        const imgX = (canvas.width - imgW) / 2;
        const imgY = 220;
        
        // Sombra para la imagen
        ctx.shadowColor = 'rgba(0, 0, 0, 0.3)';
        ctx.shadowBlur = 15;
        ctx.shadowOffsetX = 5;
        ctx.shadowOffsetY = 5;
        
        // Dibujar imagen
        ctx.drawImage(img, imgX, imgY, imgW, imgH);
        
        // Marco dorado animado
        ctx.shadowColor = 'transparent';
        ctx.shadowBlur = 0;
        ctx.shadowOffsetX = 0;
        ctx.shadowOffsetY = 0;
        
        const frameGrad = ctx.createLinearGradient(imgX - 10, imgY - 10, imgX + imgW + 10, imgY + imgH + 10);
        frameGrad.addColorStop(0, 'rgba(255, 215, 0, 0.9)');
        frameGrad.addColorStop(0.5, 'rgba(255, 255, 0, 0.7)');
        frameGrad.addColorStop(1, 'rgba(255, 215, 0, 0.9)');
        
        ctx.strokeStyle = frameGrad;
        ctx.lineWidth = 6;
        ctx.strokeRect(imgX - 8, imgY - 8, imgW + 16, imgH + 16);
        
        // Marco interior
        ctx.strokeStyle = 'rgba(255, 255, 255, 0.8)';
        ctx.lineWidth = 2;
        ctx.strokeRect(imgX - 4, imgY - 4, imgW + 8, imgH + 8);
        
        // Información del evento
        const infoY = imgY + imgH + 80;
        
        ctx.font = '22px Georgia, serif';
        ctx.fillStyle = '#2c3e50';
        ctx.fillText('Viernes, 6 de septiembre de 2025', canvas.width/2, infoY);
        ctx.fillText('12:00 del día', canvas.width/2, infoY + 35);
        
        ctx.font = '20px Georgia, serif';
        ctx.fillText('Parroquia de San Ginés', canvas.width/2, infoY + 80);
        ctx.fillText('Plaza de las Palmas, 1', canvas.width/2, infoY + 110);
        
        ctx.font = '18px Georgia, serif';
        ctx.fillStyle = '#34495e';
        ctx.fillText('Padres: José y Victoria', canvas.width/2, infoY + 150);
        ctx.fillText('Padrinos: Humberto y Ángela', canvas.width/2, infoY + 180);
        
        ctx.font = 'italic 16px Georgia, serif';
        ctx.fillStyle = '#555';
        const messageY = infoY + 220;
        ctx.fillText('Celebra con nosotros este momento lleno de fe, amor y esperanza,', canvas.width/2, messageY);
        ctx.fillText('en el que una nueva luz se enciende en nuestro camino.', canvas.width/2, messageY + 25);
        
      } else {
        // Placeholder si no hay imagen
        ctx.fillStyle = '#f0f0f0';
        ctx.strokeStyle = '#ccc';
        ctx.lineWidth = 3;
        ctx.strokeRect(200, 220, 400, 300);
        ctx.fillRect(200, 220, 400, 300);
        
        ctx.fillStyle = '#666';
        ctx.font = '20px Georgia, serif';
        ctx.fillText('Cargando imagen...', canvas.width/2, 380);
        
        // Información del evento
        const infoY = 620;
        
        ctx.font = '22px Georgia, serif';
        ctx.fillStyle = '#2c3e50';
        ctx.fillText('Viernes, 6 de septiembre de 2025', canvas.width/2, infoY);
        ctx.fillText('12:00 del día', canvas.width/2, infoY + 35);
        
        ctx.font = '20px Georgia, serif';
        ctx.fillText('Parroquia de San Ginés', canvas.width/2, infoY + 80);
        ctx.fillText('Plaza de las Palmas, 1', canvas.width/2, infoY + 110);
        
        ctx.font = '18px Georgia, serif';
        ctx.fillStyle = '#34495e';
        ctx.fillText('Padres: José y Victoria', canvas.width/2, infoY + 150);
        ctx.fillText('Padrinos: Humberto y Ángela', canvas.width/2, infoY + 180);
        
        ctx.font = 'italic 16px Georgia, serif';
        ctx.fillStyle = '#555';
        const messageY = infoY + 220;
        ctx.fillText('Celebra con nosotros este momento lleno de fe, amor y esperanza,', canvas.width/2, messageY);
        ctx.fillText('en el que una nueva luz se enciende en nuestro camino.', canvas.width/2, messageY + 25);
      }
    }
    
    // Función de animación principal
    function animate(time) {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      drawBackground(time);
      drawCornerCrosses(time);
      drawStaticElements();
      
      animationId = requestAnimationFrame(animate);
    }
    
    // Función de inicialización
    function init() {
      console.log('Iniciando invitación de bautizo...');
      
      // Configurar canvas responsive
      resizeCanvas();
      window.addEventListener('resize', resizeCanvas);
      
      // Cargar imagen
      loadImage();
      
      // Iniciar animación
      animate(0);
      
      console.log('Invitación iniciada exitosamente');
    }
    
    // Inicializar cuando esté listo
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', init);
    } else {
      init();
    }
    
    // Fallback adicional
    setTimeout(() => {
      if (!animationId) {
        console.log('Iniciando fallback...');
        init();
      }
    }, 100);
    
  </script>
</body>
</html>
